<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
      
<metal:js fill-slot="javascript_head_slot">
  <script type="text/javascript" tal:attributes="src string:${context/absolute_url}/++resource++pageturner.resources/swfobject.js"></script>
  <script type="text/javascript">
  jq(document).ready(function(){
		if(window.addEventListener)
		window.addEventListener('DOMMouseScroll', handleWheel, false);
		window.onmousewheel = document.onmousewheel = handleWheel;
		
		if (window.attachEvent) 
		window.attachEvent("onmousewheel", handleWheel);
		
		function handleWheel(event){
			try{
				if(!window.document.FlexPaperViewer.hasFocus()){return true;}
				window.document.FlexPaperViewer.setViewerFocus(true);
				window.document.FlexPaperViewer.focus();
				
				if(navigator.appName == "Netscape"){
					if (event.detail)
						delta = 0;
					if (event.preventDefault){
						event.preventDefault();
						event.returnValue = false;
						}
				}
				return false;	
			}catch(err){return true;}		
		}
	});
	</script>
	
  <script type="text/javascript" tal:content="structure view/javascript"></script>
</metal:js>
<metal:css fill-slot="style_slot">
	  <style type="text/css" media="screen"> 
	    #pageturner { display:none; }
    </style>
</metal:css>

<body>

<div metal:fill-slot="main">
    <tal:main-macro metal:define-macro="main" 
           tal:define="size python:here.getObjSize(here);
                       content_type here/get_content_type|here/Format;
                       kssClassesView context/@@kss_field_decorator_view; 
                       getKssClasses nocall:kssClassesView/getKssClassesInlineEditable">

        <div tal:replace="structure provider:plone.abovecontenttitle" />

        <h1 class="documentFirstHeading"> 
            <metal:field use-macro="python:here.widget('title', mode='view')">
            Title
            </metal:field>
        </h1>

        <div tal:replace="structure provider:plone.belowcontenttitle" />

        <p class="documentDescription">
            <metal:field use-macro="python:here.widget('description', mode='view')">
            Description
            </metal:field>
        </p>

        <div tal:replace="structure provider:plone.abovecontentbody" />


        <div id="pageturner" tal:condition="python: view.installed and view.is_pdf and view.settings.successfully_converted">
          <p> To view this page ensure that Adobe Flash Player version 9.0.124 or greater is installed.</p> 
        </div>
        
        <p>
            <metal:field use-macro="python:here.widget('file', mode='view')">
            File
            </metal:field>
        </p>

        <div tal:condition="python: content_type.startswith('text')">
            <h2 i18n:translate="heading_file_contents">File contents</h2>
            <pre tal:content="here/get_data|here/data|nothing">
            </pre>
        </div>
        
        <div metal:use-macro="here/document_relateditems/macros/relatedItems">
            show related items if they exist
        </div>
    
        <div tal:replace="structure provider:plone.belowcontentbody" />

    </tal:main-macro>
</div>

</body>

</html>
